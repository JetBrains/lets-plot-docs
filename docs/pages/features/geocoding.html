<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Geocoding &#8212; lets-plot 2.0.2 documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/thebelab-helper.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    <script src="../../_static/js/custom.js"></script>
    <script src="../../_static/js/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html">
          Lets-Plot</a>
        <span class="navbar-text navbar-version pull-left"><b>2.0.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../api.html">API</a></li>
                <li><a href="../../gallery/index.html">Gallery</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"></ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Geocoding</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#reference">Reference</a><ul>
<li><a class="reference internal" href="#levels">Levels</a></li>
<li><a class="reference internal" href="#parents">Parents</a></li>
<li><a class="reference internal" href="#scope">Scope</a></li>
<li><a class="reference internal" href="#fetch-all">Fetch all</a></li>
<li><a class="reference internal" href="#us-48">US-48</a></li>
<li><a class="reference internal" href="#ambiguity">Ambiguity</a><ul>
<li><a class="reference internal" href="#allow-ambiguous"><code class="docutils literal notranslate"><span class="pre">allow_ambiguous()</span></code></a></li>
<li><a class="reference internal" href="#ignore-not-found"><code class="docutils literal notranslate"><span class="pre">ignore_not_found()</span></code></a></li>
<li><a class="reference internal" href="#ignore-all-errors"><code class="docutils literal notranslate"><span class="pre">ignore_all_errors()</span></code></a></li>
<li><a class="reference internal" href="#where"><code class="docutils literal notranslate"><span class="pre">where()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#working-with-plots">Working with plots</a><ul>
<li><a class="reference internal" href="#plotting-a-geodataframe">Plotting a <code class="docutils literal notranslate"><span class="pre">GeoDataFrame</span></code></a></li>
<li><a class="reference internal" href="#plotting-a-geocoder">Plotting a <code class="docutils literal notranslate"><span class="pre">Geocoder</span></code></a></li>
<li><a class="reference internal" href="#map-and-map-join"><code class="docutils literal notranslate"><span class="pre">map</span></code> and <code class="docutils literal notranslate"><span class="pre">map_join</span></code></a><ul>
<li><a class="reference internal" href="#join-with-geodataframe">Join with <code class="docutils literal notranslate"><span class="pre">GeoDataFrame</span></code></a></li>
<li><a class="reference internal" href="#join-with-geocoder">Join with <code class="docutils literal notranslate"><span class="pre">Geocoder</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="geocoding">
<span id="id1"></span><h1>Geocoding<a class="headerlink" href="#geocoding" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#geocoding-overview"><span class="std std-ref">Overview</span></a></p></li>
<li><p><a class="reference internal" href="#geocoding-examples"><span class="std std-ref">Examples</span></a></p></li>
<li><p><a class="reference internal" href="#geocoding-reference"><span class="std std-ref">Reference</span></a></p>
<ul>
<li><p><a class="reference internal" href="#geocoding-levels"><span class="std std-ref">Levels</span></a></p></li>
<li><p><a class="reference internal" href="#geocoding-parents"><span class="std std-ref">Parents</span></a></p></li>
<li><p><a class="reference internal" href="#geocoding-scope"><span class="std std-ref">Scope</span></a></p></li>
<li><p><a class="reference internal" href="#geocoding-fetch-all"><span class="std std-ref">Fetch All</span></a></p></li>
<li><p><a class="reference internal" href="#geocoding-us-48"><span class="std std-ref">US-48</span></a></p></li>
<li><p><a class="reference internal" href="#geocoding-ambiguity"><span class="std std-ref">Ambiguity</span></a></p>
<ul>
<li><p><a class="reference internal" href="#geocoding-allow-ambiguous"><span class="std std-ref">allow_ambiguous()</span></a></p></li>
<li><p><a class="reference internal" href="#geocoding-ignore-not-found"><span class="std std-ref">ignore_not_found()</span></a></p></li>
<li><p><a class="reference internal" href="#geocoding-ignore-all-errors"><span class="std std-ref">ignore_all_errors()</span></a></p></li>
<li><p><a class="reference internal" href="#geocoding-where"><span class="std std-ref">where()</span></a></p>
<ul>
<li><p><a class="reference internal" href="#geocoding-where-closest-to"><span class="std std-ref">closest_to</span></a></p></li>
<li><p><a class="reference internal" href="#geocoding-where-scope"><span class="std std-ref">scope</span></a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#geocoding-working-with-plot"><span class="std std-ref">Working with plot</span></a></p>
<ul>
<li><p><a class="reference internal" href="#geocoding-plot-gdf"><span class="std std-ref">Plotting a GeoDataFrame</span></a></p></li>
<li><p><a class="reference internal" href="#geocoding-plot-geocoder"><span class="std std-ref">Plotting a Geocoder</span></a></p></li>
<li><p><a class="reference internal" href="#geocoding-join"><span class="std std-ref">map and map_join</span></a></p>
<ul>
<li><p><a class="reference internal" href="#geocoding-join-gdf"><span class="std std-ref">Join with GeoDataFrame</span></a></p></li>
<li><p><a class="reference internal" href="#geocoding-join-geocoder"><span class="std std-ref">Join with Geocoder</span></a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="section" id="overview">
<span id="geocoding-overview"></span><h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Geocoding is the process of converting names of places into geographic coordinates.</p>
<p><em>Lets-Plot</em> now offers geocoding API covering the following administrative levels:</p>
<ul class="simple">
<li><p>country</p></li>
<li><p>state</p></li>
<li><p>county</p></li>
<li><p>city</p></li>
</ul>
<p><em>Lets-Plot</em> geocoding API allows a user to execute a single and batch geocoding queries, and handle possible names ambiguity.</p>
<p>The core class is <code class="docutils literal notranslate"><span class="pre">Geocoder</span></code>. There is a function’s family for constructing the <code class="docutils literal notranslate"><span class="pre">Geocoder</span></code> object - <code class="docutils literal notranslate"><span class="pre">geocode_cities()</span></code>, <code class="docutils literal notranslate"><span class="pre">geocode_counties()</span></code>, <code class="docutils literal notranslate"><span class="pre">geocode_states()</span></code>, <code class="docutils literal notranslate"><span class="pre">geocode_countries()</span></code> and <code class="docutils literal notranslate"><span class="pre">geocode()</span></code>. For example:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">lets_plot.geo_data</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">countries</span> <span class="o">=</span> <span class="n">geocode_countries</span><span class="p">([</span><span class="s1">&#39;usa&#39;</span><span class="p">,</span> <span class="s1">&#39;canada&#39;</span><span class="p">])</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-none notranslate"><div class="highlight"><pre><span></span>The geodata is provided by © OpenStreetMap contributors and is made available here under the Open Database License (ODbL).
</pre></div>
</div>
</div>
</div>
<div class="line-block">
<div class="line">Note that actual geocoding process is not executing here, it starts when any <code class="docutils literal notranslate"><span class="pre">get_xxx()</span></code> function is called.</div>
</div>
<p>We will use in examples function <code class="docutils literal notranslate"><span class="pre">get_geocodes()</span></code> which returns <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> with metadata.</p>
<p>Let us geocode countries. This code returns the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> object containing internal IDs for Canada and the US:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">countries</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>country</th>
      <th>found name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>297677</td>
      <td>usa</td>
      <td>United States</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2856251</td>
      <td>canada</td>
      <td>Canada</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="line-block">
<div class="line">More complex queries can be created in order to specify how to handle geocoding ambiguities.</div>
</div>
<p>For example, this sample returns the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> object containing IDs of all cities matching “warwick”:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">geocode_cities</span><span class="p">(</span><span class="s1">&#39;warwick&#39;</span><span class="p">)</span>  \
    <span class="o">.</span><span class="n">allow_ambiguous</span><span class="p">()</span>  \
    <span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>city</th>
      <th>found name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>239553</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
    <tr>
      <th>1</th>
      <td>352173</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
    <tr>
      <th>2</th>
      <td>352897</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
    <tr>
      <th>3</th>
      <td>363189</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
    <tr>
      <th>4</th>
      <td>368499</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
    <tr>
      <th>5</th>
      <td>785807</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
    <tr>
      <th>6</th>
      <td>3679247</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8144841</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
    <tr>
      <th>8</th>
      <td>15994531</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
    <tr>
      <th>9</th>
      <td>382429</td>
      <td>warwick</td>
      <td>West Warwick</td>
    </tr>
    <tr>
      <th>10</th>
      <td>6098747</td>
      <td>warwick</td>
      <td>Warwick Township</td>
    </tr>
    <tr>
      <th>11</th>
      <td>7042961</td>
      <td>warwick</td>
      <td>Warwick Township</td>
    </tr>
    <tr>
      <th>12</th>
      <td>18489127</td>
      <td>warwick</td>
      <td>Warwick Mountain</td>
    </tr>
    <tr>
      <th>13</th>
      <td>15994533</td>
      <td>warwick</td>
      <td>Sainte-Élizabeth-de-Warwick</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="line-block">
<div class="line">This example returns the <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> object containing the ID of one particular “warwick” closest to Boston (US):</div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">boston_us</span> <span class="o">=</span> <span class="n">geocode_cities</span><span class="p">(</span><span class="s1">&#39;boston&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">scope</span><span class="p">(</span><span class="s1">&#39;us&#39;</span><span class="p">)</span>
<span class="n">geocode_cities</span><span class="p">(</span><span class="s1">&#39;warwick&#39;</span><span class="p">)</span> \
    <span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;warwick&#39;</span><span class="p">,</span> <span class="n">closest_to</span><span class="o">=</span><span class="n">boston_us</span><span class="p">)</span> \
    <span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>city</th>
      <th>found name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>785807</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="line-block">
<div class="line">Once the <code class="docutils literal notranslate"><span class="pre">Geocoder</span></code> object is available, it can be passed to any <em>Lets-Plot</em> geom supporting the <code class="docutils literal notranslate"><span class="pre">map</span></code> parameter.</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">map</span></code> parameter can be used to simply <a class="reference internal" href="#geocoding-plot-gdf"><span class="std std-ref">draw a GeoDataFrame</span></a> or to <a class="reference internal" href="#geocoding-plot-geocoder"><span class="std std-ref">draw a Geocoder</span></a>.
For more complex plots parameter <a class="reference internal" href="#geocoding-join"><span class="std std-ref">map_join</span></a> can be used to map data to geometries.</p>
<p>If necessary, the <code class="docutils literal notranslate"><span class="pre">Geocoder</span></code> object can be transformed to a geopandas <code class="docutils literal notranslate"><span class="pre">GeoDataFrame</span></code> using one of <code class="docutils literal notranslate"><span class="pre">get_centroids()</span></code>, <code class="docutils literal notranslate"><span class="pre">get_boundaries()</span></code>, or <code class="docutils literal notranslate"><span class="pre">get_limits()</span></code> methods.</p>
<p>All coordinates are in the EPSG:4326 coordinate reference system (CRS).</p>
<p>Note that an internet connection is required to execute geocoding queries.</p>
</div>
<div class="section" id="examples">
<span id="geocoding-examples"></span><h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Various geocoding cases with maps: <a class="reference external" href="https://nbviewer.jupyter.org/github/JetBrains/lets-plot/blob/master/docs/examples/jupyter-notebooks/geocoding_examples.ipynb">geocoding_examples.ipynb</a></p></li>
<li><p>Mapping US Household Income: <a class="reference external" href="https://www.kaggle.com/alshan/mapping-us-household-income"><img alt="View at Kaggle" height="20px" src="https://raw.githubusercontent.com/JetBrains/lets-plot/master/docs/examples/images/logo_kaggle.svg" width="20px" /></a></p></li>
</ul>
<ul class="simple">
<li><p>Geocoding the US counties: <a class="reference external" href="https://nbviewer.jupyter.org/github/JetBrains/lets-plot/blob/master/docs/examples/jupyter-notebooks/map_US_household_income.ipynb">map_US_household_income.ipynb</a></p></li>
<li><p>Visualization of the Titanic’s voyage: <a class="reference external" href="https://view.datalore.io/notebook/1h4h0HMctRKJLY64PBe63a"><img alt="View in Datalore" height="20px" src="https://raw.githubusercontent.com/JetBrains/lets-plot/master/docs/examples/images/logo_datalore.svg" width="20px" /></a> <a class="reference external" href="https://www.kaggle.com/alshan/visualization-of-the-titanic-s-voyage"><img alt="View at Kaggle" height="20px" src="https://raw.githubusercontent.com/JetBrains/lets-plot/master/docs/examples/images/logo_kaggle.svg" width="20px" /></a> <a class="reference external" href="https://colab.research.google.com/drive/1PerUfSCyStcbnlXnxBj-JVI25-cXB_N5?usp=sharing"><img alt="View at Colab" height="20px" src="https://raw.githubusercontent.com/JetBrains/lets-plot/master/docs/examples/images/logo_colab.svg" width="20px" /></a></p></li>
</ul>
<a class="reference internal image-reference" href="https://raw.githubusercontent.com/JetBrains/lets-plot/master/docs/examples/images/map_titanic.png"><img alt="Couldn't load map_titanic.png" src="https://raw.githubusercontent.com/JetBrains/lets-plot/master/docs/examples/images/map_titanic.png" style="width: 547px; height: 197px;" /></a>
<ul class="simple">
<li><p>Visualization of Airport Data on Map: <a class="reference external" href="https://www.kaggle.com/alshan/visualization-of-airport-data-on-map"><img alt="View at Kaggle" height="20px" src="https://raw.githubusercontent.com/JetBrains/lets-plot/master/docs/examples/images/logo_kaggle.svg" width="20px" /></a></p></li>
</ul>
<a class="reference internal image-reference" href="https://raw.githubusercontent.com/JetBrains/lets-plot/master/docs/examples/images/map_airports.png"><img alt="Couldn't load map_airports.png" src="https://raw.githubusercontent.com/JetBrains/lets-plot/master/docs/examples/images/map_airports.png" style="width: 547px; height: 311px;" /></a>
</div>
<div class="section" id="reference">
<span id="geocoding-reference"></span><h2>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://nbviewer.jupyter.org/github/JetBrains/lets-plot/blob/master/docs/examples/jupyter-notebooks/geocoding_reference.ipynb">‘geocoding_reference’</a> notebook contains a demonstration code covering use-cases presented in this section.</p>
<div class="section" id="levels">
<span id="geocoding-levels"></span><h3>Levels<a class="headerlink" href="#levels" title="Permalink to this headline">¶</a></h3>
<p>Geocoding supports 4 administrative levels:</p>
<ul class="simple">
<li><p>city</p></li>
<li><p>county</p></li>
<li><p>state</p></li>
<li><p>country</p></li>
</ul>
<p>Function <code class="docutils literal notranslate"><span class="pre">geocode()</span></code> with <code class="docutils literal notranslate"><span class="pre">level=None</span></code> can try to detect level automatically - it enumerates all levels from country to city and selects best matching level (result without ambiguity and unknown names).
For example:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">geocode</span><span class="p">(</span><span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;florida&#39;</span><span class="p">,</span> <span class="s1">&#39;tx&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>state</th>
      <th>found name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>324101</td>
      <td>florida</td>
      <td>Florida</td>
    </tr>
    <tr>
      <th>1</th>
      <td>229381</td>
      <td>tx</td>
      <td>Texas</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="line-block">
<div class="line">Level auto-detection can be useful, but it is slower and not recommended for large data sets.</div>
</div>
<p>Functions <code class="docutils literal notranslate"><span class="pre">geocode_cities()</span></code>, <code class="docutils literal notranslate"><span class="pre">geocode_counties()</span></code>, <code class="docutils literal notranslate"><span class="pre">geocode_states()</span></code>, <code class="docutils literal notranslate"><span class="pre">geocode_countries()</span></code> or <code class="docutils literal notranslate"><span class="pre">geocode(level=xxx)</span></code> search names only at a given level or return an error.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">geocode_states</span><span class="p">([</span><span class="s1">&#39;florida&#39;</span><span class="p">,</span> <span class="s1">&#39;tx&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>state</th>
      <th>found name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>324101</td>
      <td>florida</td>
      <td>Florida</td>
    </tr>
    <tr>
      <th>1</th>
      <td>229381</td>
      <td>tx</td>
      <td>Texas</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="parents">
<span id="geocoding-parents"></span><h3>Parents<a class="headerlink" href="#parents" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Geocoder</span></code> class provides functions to define parents with administrative level - <code class="docutils literal notranslate"><span class="pre">counties()</span></code>, <code class="docutils literal notranslate"><span class="pre">states()</span></code>, <code class="docutils literal notranslate"><span class="pre">countries()</span></code>.
These functions can handle single or multiple values of type string or <code class="docutils literal notranslate"><span class="pre">Geocoder</span></code>. The number of values must match the number of names in <code class="docutils literal notranslate"><span class="pre">Geocoder</span></code> so that they form a table.</p>
<p>Parents will be present in the result <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> to make it possible to join data and geometry via <a class="reference internal" href="#geocoding-join"><span class="std std-ref">map_join</span></a>.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">geocode_cities</span><span class="p">([</span><span class="s1">&#39;warwick&#39;</span><span class="p">,</span> <span class="s1">&#39;worcester&#39;</span><span class="p">])</span>\
    <span class="o">.</span><span class="n">counties</span><span class="p">([</span><span class="s1">&#39;Worth County&#39;</span><span class="p">,</span> <span class="s1">&#39;worcester county&#39;</span><span class="p">])</span>\
    <span class="o">.</span><span class="n">states</span><span class="p">([</span><span class="s1">&#39;georgia&#39;</span><span class="p">,</span> <span class="s1">&#39;massachusetts&#39;</span><span class="p">])</span>\
    <span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>city</th>
      <th>found name</th>
      <th>county</th>
      <th>state</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>239553</td>
      <td>warwick</td>
      <td>Warwick</td>
      <td>Worth County</td>
      <td>georgia</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3688419</td>
      <td>worcester</td>
      <td>Worcester</td>
      <td>worcester county</td>
      <td>massachusetts</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="line-block">
<div class="line">Parents can contain <code class="docutils literal notranslate"><span class="pre">None</span></code> value for countries with different administrative division:</div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">geocode_cities</span><span class="p">([</span><span class="s1">&#39;warwick&#39;</span><span class="p">,</span> <span class="s1">&#39;worcester&#39;</span><span class="p">])</span>\
    <span class="o">.</span><span class="n">states</span><span class="p">([</span><span class="s1">&#39;Georgia&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">])</span>\
    <span class="o">.</span><span class="n">countries</span><span class="p">([</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="s1">&#39;United Kingdom&#39;</span><span class="p">])</span>\
    <span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>city</th>
      <th>found name</th>
      <th>state</th>
      <th>country</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>239553</td>
      <td>warwick</td>
      <td>Warwick</td>
      <td>Georgia</td>
      <td>USA</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3750683</td>
      <td>worcester</td>
      <td>Worcester</td>
      <td>None</td>
      <td>United Kingdom</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="line-block">
<div class="line">Parent can be <code class="docutils literal notranslate"><span class="pre">Geocoder</span></code> object. This allows resolving parent’s ambiguity:</div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">geocode_states</span><span class="p">([</span><span class="s1">&#39;vermont&#39;</span><span class="p">,</span> <span class="s1">&#39;georgia&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">scope</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span>
<span class="n">geocode_cities</span><span class="p">([</span><span class="s1">&#39;worcester&#39;</span><span class="p">,</span> <span class="s1">&#39;warwick&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">states</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>city</th>
      <th>found name</th>
      <th>state</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>17796275</td>
      <td>worcester</td>
      <td>Worcester</td>
      <td>vermont</td>
    </tr>
    <tr>
      <th>1</th>
      <td>239553</td>
      <td>warwick</td>
      <td>Warwick</td>
      <td>georgia</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="scope">
<span id="geocoding-scope"></span><h3>Scope<a class="headerlink" href="#scope" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">scope()</span></code> is a special kind of parent.
<code class="docutils literal notranslate"><span class="pre">scope()</span></code> can handle a <code class="docutils literal notranslate"><span class="pre">string</span></code> or a single entry <code class="docutils literal notranslate"><span class="pre">Geocoder</span></code> object.
<code class="docutils literal notranslate"><span class="pre">scope()</span></code> is not associated with any administrative level, it acts as parent for any other parents and names.
<code class="docutils literal notranslate"><span class="pre">scope()</span></code> can not be used with <code class="docutils literal notranslate"><span class="pre">countries()</span></code> parents.
Typical use-case: all of names belong to the same parent.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">geocode_counties</span><span class="p">([</span><span class="s1">&#39;Dakota County&#39;</span><span class="p">,</span> <span class="s1">&#39;Nevada County&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">states</span><span class="p">([</span><span class="s1">&#39;NE&#39;</span><span class="p">,</span> <span class="s1">&#39;AR&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">scope</span><span class="p">(</span><span class="s1">&#39;USA&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>county</th>
      <th>found name</th>
      <th>state</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2850895</td>
      <td>Dakota County</td>
      <td>Dakota County</td>
      <td>NE</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3653651</td>
      <td>Nevada County</td>
      <td>Nevada County</td>
      <td>AR</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="line-block">
<div class="line">Parents can be modified between searches:</div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">florida</span> <span class="o">=</span> <span class="n">geocode_states</span><span class="p">(</span><span class="s1">&#39;florida&#39;</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">florida</span><span class="o">.</span><span class="n">countries</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">())</span>
<span class="n">display</span><span class="p">(</span><span class="n">florida</span><span class="o">.</span><span class="n">countries</span><span class="p">(</span><span class="s1">&#39;uruguay&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">())</span>
<span class="n">display</span><span class="p">(</span><span class="n">florida</span><span class="o">.</span><span class="n">countries</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">())</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>state</th>
      <th>found name</th>
      <th>country</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>324101</td>
      <td>florida</td>
      <td>Florida</td>
      <td>usa</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>state</th>
      <th>found name</th>
      <th>country</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3270329</td>
      <td>florida</td>
      <td>Florida</td>
      <td>uruguay</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>state</th>
      <th>found name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>324101</td>
      <td>florida</td>
      <td>Florida</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="fetch-all">
<span id="geocoding-fetch-all"></span><h3>Fetch all<a class="headerlink" href="#fetch-all" title="Permalink to this headline">¶</a></h3>
<p>It is possible to fetch all objects within parent - just do not set the <code class="docutils literal notranslate"><span class="pre">names</span></code> parameter.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">geocode_counties</span><span class="p">()</span><span class="o">.</span><span class="n">states</span><span class="p">(</span><span class="s1">&#39;massachusetts&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>county</th>
      <th>found name</th>
      <th>state</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2363239</td>
      <td>Hampden County</td>
      <td>Hampden County</td>
      <td>massachusetts</td>
    </tr>
    <tr>
      <th>1</th>
      <td>122643</td>
      <td>Berkshire County</td>
      <td>Berkshire County</td>
      <td>massachusetts</td>
    </tr>
    <tr>
      <th>2</th>
      <td>180869</td>
      <td>Essex County</td>
      <td>Essex County</td>
      <td>massachusetts</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3677609</td>
      <td>Hampshire County</td>
      <td>Hampshire County</td>
      <td>massachusetts</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3677611</td>
      <td>Worcester County</td>
      <td>Worcester County</td>
      <td>massachusetts</td>
    </tr>
    <tr>
      <th>5</th>
      <td>3679221</td>
      <td>Franklin County</td>
      <td>Franklin County</td>
      <td>massachusetts</td>
    </tr>
    <tr>
      <th>6</th>
      <td>3681075</td>
      <td>Bristol County</td>
      <td>Bristol County</td>
      <td>massachusetts</td>
    </tr>
    <tr>
      <th>7</th>
      <td>3681077</td>
      <td>Middlesex County</td>
      <td>Middlesex County</td>
      <td>massachusetts</td>
    </tr>
    <tr>
      <th>8</th>
      <td>3681079</td>
      <td>Norfolk County</td>
      <td>Norfolk County</td>
      <td>massachusetts</td>
    </tr>
    <tr>
      <th>9</th>
      <td>3681081</td>
      <td>Plymouth County</td>
      <td>Plymouth County</td>
      <td>massachusetts</td>
    </tr>
    <tr>
      <th>10</th>
      <td>4588617</td>
      <td>Barnstable County</td>
      <td>Barnstable County</td>
      <td>massachusetts</td>
    </tr>
    <tr>
      <th>11</th>
      <td>4596309</td>
      <td>Suffolk County</td>
      <td>Suffolk County</td>
      <td>massachusetts</td>
    </tr>
    <tr>
      <th>12</th>
      <td>4774175</td>
      <td>Nantucket County</td>
      <td>Nantucket County</td>
      <td>massachusetts</td>
    </tr>
    <tr>
      <th>13</th>
      <td>4774397</td>
      <td>Dukes County</td>
      <td>Dukes County</td>
      <td>massachusetts</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="us-48">
<span id="geocoding-us-48"></span><h3>US-48<a class="headerlink" href="#us-48" title="Permalink to this headline">¶</a></h3>
<p>Geocoding supports a special name <code class="docutils literal notranslate"><span class="pre">us-48</span></code> for <a class="reference external" href="https://en.wikipedia.org/wiki/Contiguous_United_States">CONUS</a>.
The <code class="docutils literal notranslate"><span class="pre">us-48</span></code> can be used as name or parent.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">geocode_states</span><span class="p">(</span><span class="s1">&#39;us-48&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>state</th>
      <th>found name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>121519</td>
      <td>Vermont</td>
      <td>Vermont</td>
    </tr>
    <tr>
      <th>1</th>
      <td>122631</td>
      <td>Massachusetts</td>
      <td>Massachusetts</td>
    </tr>
    <tr>
      <th>2</th>
      <td>122641</td>
      <td>New York</td>
      <td>New York</td>
    </tr>
    <tr>
      <th>3</th>
      <td>127025</td>
      <td>Maine</td>
      <td>Maine</td>
    </tr>
    <tr>
      <th>4</th>
      <td>134427</td>
      <td>New Hampshire</td>
      <td>New Hampshire</td>
    </tr>
    <tr>
      <th>5</th>
      <td>229381</td>
      <td>Texas</td>
      <td>Texas</td>
    </tr>
    <tr>
      <th>6</th>
      <td>245173</td>
      <td>Illinois</td>
      <td>Illinois</td>
    </tr>
    <tr>
      <th>7</th>
      <td>323277</td>
      <td>Missouri</td>
      <td>Missouri</td>
    </tr>
    <tr>
      <th>8</th>
      <td>323289</td>
      <td>Kansas</td>
      <td>Kansas</td>
    </tr>
    <tr>
      <th>9</th>
      <td>323291</td>
      <td>Oklahoma</td>
      <td>Oklahoma</td>
    </tr>
    <tr>
      <th>10</th>
      <td>323293</td>
      <td>Arkansas</td>
      <td>Arkansas</td>
    </tr>
    <tr>
      <th>11</th>
      <td>323297</td>
      <td>Nebraska</td>
      <td>Nebraska</td>
    </tr>
    <tr>
      <th>12</th>
      <td>323301</td>
      <td>Iowa</td>
      <td>Iowa</td>
    </tr>
    <tr>
      <th>13</th>
      <td>323305</td>
      <td>South Dakota</td>
      <td>South Dakota</td>
    </tr>
    <tr>
      <th>14</th>
      <td>323307</td>
      <td>North Dakota</td>
      <td>North Dakota</td>
    </tr>
    <tr>
      <th>15</th>
      <td>323311</td>
      <td>Kentucky</td>
      <td>Kentucky</td>
    </tr>
    <tr>
      <th>16</th>
      <td>323633</td>
      <td>Indiana</td>
      <td>Indiana</td>
    </tr>
    <tr>
      <th>17</th>
      <td>323677</td>
      <td>Tennessee</td>
      <td>Tennessee</td>
    </tr>
    <tr>
      <th>18</th>
      <td>323887</td>
      <td>Mississippi</td>
      <td>Mississippi</td>
    </tr>
    <tr>
      <th>19</th>
      <td>323901</td>
      <td>Alabama</td>
      <td>Alabama</td>
    </tr>
    <tr>
      <th>20</th>
      <td>323915</td>
      <td>Georgia</td>
      <td>Georgia</td>
    </tr>
    <tr>
      <th>21</th>
      <td>323923</td>
      <td>Colorado</td>
      <td>Colorado</td>
    </tr>
    <tr>
      <th>22</th>
      <td>323983</td>
      <td>Wyoming</td>
      <td>Wyoming</td>
    </tr>
    <tr>
      <th>23</th>
      <td>323987</td>
      <td>Utah</td>
      <td>Utah</td>
    </tr>
    <tr>
      <th>24</th>
      <td>324029</td>
      <td>New Mexico</td>
      <td>New Mexico</td>
    </tr>
    <tr>
      <th>25</th>
      <td>324037</td>
      <td>Arizona</td>
      <td>Arizona</td>
    </tr>
    <tr>
      <th>26</th>
      <td>324101</td>
      <td>Florida</td>
      <td>Florida</td>
    </tr>
    <tr>
      <th>27</th>
      <td>324123</td>
      <td>Ohio</td>
      <td>Ohio</td>
    </tr>
    <tr>
      <th>28</th>
      <td>324137</td>
      <td>West Virginia</td>
      <td>West Virginia</td>
    </tr>
    <tr>
      <th>29</th>
      <td>324139</td>
      <td>District of Columbia</td>
      <td>District of Columbia</td>
    </tr>
    <tr>
      <th>30</th>
      <td>324219</td>
      <td>Pennsylvania</td>
      <td>Pennsylvania</td>
    </tr>
    <tr>
      <th>31</th>
      <td>324221</td>
      <td>Delaware</td>
      <td>Delaware</td>
    </tr>
    <tr>
      <th>32</th>
      <td>324225</td>
      <td>Maryland</td>
      <td>Maryland</td>
    </tr>
    <tr>
      <th>33</th>
      <td>324231</td>
      <td>Montana</td>
      <td>Montana</td>
    </tr>
    <tr>
      <th>34</th>
      <td>324233</td>
      <td>Idaho</td>
      <td>Idaho</td>
    </tr>
    <tr>
      <th>35</th>
      <td>330933</td>
      <td>Wisconsin</td>
      <td>Wisconsin</td>
    </tr>
    <tr>
      <th>36</th>
      <td>330943</td>
      <td>Minnesota</td>
      <td>Minnesota</td>
    </tr>
    <tr>
      <th>37</th>
      <td>330947</td>
      <td>Nevada</td>
      <td>Nevada</td>
    </tr>
    <tr>
      <th>38</th>
      <td>330951</td>
      <td>California</td>
      <td>California</td>
    </tr>
    <tr>
      <th>39</th>
      <td>330953</td>
      <td>Oregon</td>
      <td>Oregon</td>
    </tr>
    <tr>
      <th>40</th>
      <td>330959</td>
      <td>Washington</td>
      <td>Washington</td>
    </tr>
    <tr>
      <th>41</th>
      <td>331579</td>
      <td>Michigan</td>
      <td>Michigan</td>
    </tr>
    <tr>
      <th>42</th>
      <td>331589</td>
      <td>Connecticut</td>
      <td>Connecticut</td>
    </tr>
    <tr>
      <th>43</th>
      <td>448081</td>
      <td>South Carolina</td>
      <td>South Carolina</td>
    </tr>
    <tr>
      <th>44</th>
      <td>448085</td>
      <td>Virginia</td>
      <td>Virginia</td>
    </tr>
    <tr>
      <th>45</th>
      <td>448091</td>
      <td>North Carolina</td>
      <td>North Carolina</td>
    </tr>
    <tr>
      <th>46</th>
      <td>449845</td>
      <td>Louisiana</td>
      <td>Louisiana</td>
    </tr>
    <tr>
      <th>47</th>
      <td>449903</td>
      <td>New Jersey</td>
      <td>New Jersey</td>
    </tr>
    <tr>
      <th>48</th>
      <td>785831</td>
      <td>Rhode Island</td>
      <td>Rhode Island</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="ambiguity">
<span id="geocoding-ambiguity"></span><h3>Ambiguity<a class="headerlink" href="#ambiguity" title="Permalink to this headline">¶</a></h3>
<p>Often geocoding can find multiple objects for a name or do not find anything.
In this case error will be generated:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">geocode_cities</span><span class="p">([</span><span class="s1">&#39;warwick&#39;</span><span class="p">,</span> <span class="s1">&#39;worcester&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">14</span><span class="o">-</span><span class="n">fe0e39d79d34</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">geocode_cities</span><span class="p">([</span><span class="s1">&#39;warwick&#39;</span><span class="p">,</span> <span class="s1">&#39;worcester&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>

<span class="nn">D:\anaconda3\envs\lets-plot-docs\lib\site-packages\lets_plot\geo_data\geocoder.py</span> in <span class="ni">get_geocodes</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">329</span> 
<span class="g g-Whitespace">    </span><span class="mi">330</span>         <span class="s2">&quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">331</span><span class="s2">         return self._geocode().to_data_frame()</span>
<span class="g g-Whitespace">    </span><span class="mi">332</span><span class="s2"> </span>
<span class="g g-Whitespace">    </span><span class="mi">333</span><span class="s2">     def inc_res(self, delta=2):</span>

<span class="nn">D:\anaconda3\envs\lets-plot-docs\lib\site-packages\lets_plot\geo_data\geocoder.py</span> in <span class="ni">_geocode</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">920</span><span class="s2">             response: Response = GeocodingService().do_request(request)</span>
<span class="g g-Whitespace">    </span><span class="mi">921</span><span class="s2">             if not isinstance(response, SuccessResponse):</span>
<span class="ne">--&gt; </span><span class="mi">922</span><span class="s2">                 _raise_exception(response)</span>
<span class="g g-Whitespace">    </span><span class="mi">923</span><span class="s2">             self._geocodes = Geocodes(response.level, response.answers, request.region_queries, self._highlights)</span>
<span class="g g-Whitespace">    </span><span class="mi">924</span><span class="s2"> </span>

<span class="nn">D:\anaconda3\envs\lets-plot-docs\lib\site-packages\lets_plot\geo_data\geocodes.py</span> in <span class="ni">_raise_exception</span><span class="nt">(response)</span>
<span class="g g-Whitespace">    </span><span class="mi">389</span><span class="s2"> def _raise_exception(response: Response):</span>
<span class="g g-Whitespace">    </span><span class="mi">390</span><span class="s2">     msg = _format_error_message(response)</span>
<span class="ne">--&gt; </span><span class="mi">391</span><span class="s2">     raise ValueError(msg)</span>
<span class="g g-Whitespace">    </span><span class="mi">392</span><span class="s2"> </span>
<span class="g g-Whitespace">    </span><span class="mi">393</span><span class="s2"> </span>

<span class="ne">ValueError</span>: Multiple objects (14) were found for warwick:
<span class="s2">- Warwick (United States, Georgia, Worth County)</span>
<span class="s2">- Warwick (United States, New York, Orange County)</span>
<span class="s2">- Warwick (United Kingdom, England, West Midlands, Warwickshire)</span>
<span class="s2">- Warwick (United States, North Dakota, Benson County)</span>
<span class="s2">- Warwick (United States, Oklahoma, Lincoln County)</span>
<span class="s2">- Warwick (United States, Rhode Island, Kent County)</span>
<span class="s2">- Warwick (United States, Massachusetts, Franklin County)</span>
<span class="s2">- Warwick (Canada, Ontario, Southwestern Ontario, Lambton County)</span>
<span class="s2">- Warwick (Canada, Québec, Centre-du-Québec, Arthabaska)</span>
<span class="s2">- West Warwick (United States, Rhode Island, Kent County)</span>
<span class="s2">Multiple objects (4) were found for worcester:</span>
<span class="s2">- Worcester (United States, Massachusetts, Worcester County)</span>
<span class="s2">- Worcester (United Kingdom, England, West Midlands, Worcestershire)</span>
<span class="s2">- Worcester (United States, Vermont, Washington County)</span>
<span class="s2">- Worcester Township (United States, Pennsylvania, Montgomery County)</span>
</pre></div>
</div>
</div>
</div>
<div class="line-block">
<div class="line">The ambiguity can be resolved in different ways.</div>
</div>
<div class="section" id="allow-ambiguous">
<span id="geocoding-allow-ambiguous"></span><h4><code class="docutils literal notranslate"><span class="pre">allow_ambiguous()</span></code><a class="headerlink" href="#allow-ambiguous" title="Permalink to this headline">¶</a></h4>
<p>The best way is to find an object that we search and use its parents.
The function converts error result into success result that can be rendered on a map or verified manually in other way.
Can be combined with <a class="reference internal" href="#geocoding-ignore-not-found"><span class="std std-ref">ignore_not_found()</span></a> to suppress the “not found” error, which has higher priority.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">geocode_cities</span><span class="p">([</span><span class="s1">&#39;warwick&#39;</span><span class="p">,</span> <span class="s1">&#39;worcester&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">allow_ambiguous</span><span class="p">()</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>city</th>
      <th>found name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>239553</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
    <tr>
      <th>1</th>
      <td>352173</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
    <tr>
      <th>2</th>
      <td>352897</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
    <tr>
      <th>3</th>
      <td>363189</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
    <tr>
      <th>4</th>
      <td>368499</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
    <tr>
      <th>5</th>
      <td>785807</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
    <tr>
      <th>6</th>
      <td>3679247</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8144841</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
    <tr>
      <th>8</th>
      <td>15994531</td>
      <td>warwick</td>
      <td>Warwick</td>
    </tr>
    <tr>
      <th>9</th>
      <td>382429</td>
      <td>warwick</td>
      <td>West Warwick</td>
    </tr>
    <tr>
      <th>10</th>
      <td>6098747</td>
      <td>warwick</td>
      <td>Warwick Township</td>
    </tr>
    <tr>
      <th>11</th>
      <td>7042961</td>
      <td>warwick</td>
      <td>Warwick Township</td>
    </tr>
    <tr>
      <th>12</th>
      <td>18489127</td>
      <td>warwick</td>
      <td>Warwick Mountain</td>
    </tr>
    <tr>
      <th>13</th>
      <td>15994533</td>
      <td>warwick</td>
      <td>Sainte-Élizabeth-de-Warwick</td>
    </tr>
    <tr>
      <th>14</th>
      <td>3688419</td>
      <td>worcester</td>
      <td>Worcester</td>
    </tr>
    <tr>
      <th>15</th>
      <td>3750683</td>
      <td>worcester</td>
      <td>Worcester</td>
    </tr>
    <tr>
      <th>16</th>
      <td>17796275</td>
      <td>worcester</td>
      <td>Worcester</td>
    </tr>
    <tr>
      <th>17</th>
      <td>6152583</td>
      <td>worcester</td>
      <td>Worcester Township</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="ignore-not-found">
<span id="geocoding-ignore-not-found"></span><h4><code class="docutils literal notranslate"><span class="pre">ignore_not_found()</span></code><a class="headerlink" href="#ignore-not-found" title="Permalink to this headline">¶</a></h4>
<p>Removes unknown names from the result.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">geocode_cities</span><span class="p">([</span><span class="s1">&#39;paris&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">ignore_not_found</span><span class="p">()</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>city</th>
      <th>found name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>14889</td>
      <td>paris</td>
      <td>Paris</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="ignore-all-errors">
<span id="geocoding-ignore-all-errors"></span><h4><code class="docutils literal notranslate"><span class="pre">ignore_all_errors()</span></code><a class="headerlink" href="#ignore-all-errors" title="Permalink to this headline">¶</a></h4>
<p>Remove not found names or names with multiple matches.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">geocode_cities</span><span class="p">([</span><span class="s1">&#39;paris&#39;</span><span class="p">,</span> <span class="s1">&#39;worcester&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">ignore_all_errors</span><span class="p">()</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>city</th>
      <th>found name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>14889</td>
      <td>paris</td>
      <td>Paris</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="where">
<span id="geocoding-where"></span><h4><code class="docutils literal notranslate"><span class="pre">where()</span></code><a class="headerlink" href="#where" title="Permalink to this headline">¶</a></h4>
<p>For resolving an ambiguity geocoding provides a function that can configure names individually.</p>
<p>To configure a name the function <code class="docutils literal notranslate"><span class="pre">where(...)</span></code> should be called with the place name and all used parent names.
Parents cannot be changed via <code class="docutils literal notranslate"><span class="pre">where()</span></code> function call.
If name and parents do not match with ones from the <code class="docutils literal notranslate"><span class="pre">where()</span></code> function an error will be generated.
It is important for cases like this:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">geocode_counties</span><span class="p">([</span><span class="s1">&#39;Washington&#39;</span><span class="p">,</span> <span class="s1">&#39;Washington&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">states</span><span class="p">([</span><span class="s1">&#39;oregon&#39;</span><span class="p">,</span> <span class="s1">&#39;utah&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>county</th>
      <th>found name</th>
      <th>state</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3674267</td>
      <td>Washington</td>
      <td>Washington County</td>
      <td>oregon</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3488745</td>
      <td>Washington</td>
      <td>Washington County</td>
      <td>utah</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="line-block" id="geocoding-where-closest-to">
<div class="line"><strong>closest_to</strong></div>
</div>
<p>With parameter <code class="docutils literal notranslate"><span class="pre">closest_to</span></code> geocoding will take only the object closest to given place.
Parameter <code class="docutils literal notranslate"><span class="pre">closest_to</span></code> can be a single value <code class="docutils literal notranslate"><span class="pre">Geocoder</span></code>.</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">boston</span> <span class="o">=</span> <span class="n">geocode_cities</span><span class="p">(</span><span class="s1">&#39;boston&#39;</span><span class="p">)</span>
<span class="n">geocode_cities</span><span class="p">(</span><span class="s1">&#39;worcester&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;worcester&#39;</span><span class="p">,</span> <span class="n">closest_to</span><span class="o">=</span><span class="n">boston</span><span class="p">)</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>city</th>
      <th>found name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3688419</td>
      <td>worcester</td>
      <td>Worcester</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="line-block">
<div class="line">Or it can be a <code class="docutils literal notranslate"><span class="pre">shapely.geometry.Point</span></code>.</div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">shapely</span>

<span class="n">geocode_cities</span><span class="p">(</span><span class="s1">&#39;worcester&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;worcester&#39;</span><span class="p">,</span> <span class="n">closest_to</span><span class="o">=</span><span class="n">shapely</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="mf">71.088</span><span class="p">,</span> <span class="mf">42.311</span><span class="p">))</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>city</th>
      <th>found name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3688419</td>
      <td>worcester</td>
      <td>Worcester</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="line-block" id="geocoding-where-scope">
<div class="line"><strong>scope</strong></div>
</div>
<p>With parameter <code class="docutils literal notranslate"><span class="pre">scope</span></code> a <code class="docutils literal notranslate"><span class="pre">shapely.geometry.Polygon</span></code> can be used for limiting an area of the search (coordinates should be in WGS84 coordinate system).
Note that bbox of the polygon will be used:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">geocode_cities</span><span class="p">(</span><span class="s1">&#39;worcester&#39;</span><span class="p">)</span>\
    <span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;worcester&#39;</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="n">shapely</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">box</span><span class="p">(</span><span class="o">-</span><span class="mf">71.00</span><span class="p">,</span> <span class="mf">42.00</span><span class="p">,</span> <span class="o">-</span><span class="mf">72.00</span><span class="p">,</span> <span class="mf">43.00</span><span class="p">))</span>\
    <span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>city</th>
      <th>found name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3688419</td>
      <td>worcester</td>
      <td>Worcester</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="line-block">
<div class="line">Also, <code class="docutils literal notranslate"><span class="pre">scope</span></code> can be a single value <code class="docutils literal notranslate"><span class="pre">Geocoder</span></code> object or a <code class="docutils literal notranslate"><span class="pre">string</span></code>:</div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">massachusetts</span> <span class="o">=</span> <span class="n">geocode_states</span><span class="p">(</span><span class="s1">&#39;massachusetts&#39;</span><span class="p">)</span>
<span class="n">geocode_cities</span><span class="p">(</span><span class="s1">&#39;worcester&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;worcester&#39;</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="n">massachusetts</span><span class="p">)</span><span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>city</th>
      <th>found name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3688419</td>
      <td>worcester</td>
      <td>Worcester</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">scope</span></code> does not change parents in the result <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>:</div>
</div>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">worcester_county</span><span class="o">=</span><span class="n">geocode_counties</span><span class="p">(</span><span class="s1">&#39;Worcester County&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">states</span><span class="p">(</span><span class="s1">&#39;massachusetts&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">countries</span><span class="p">(</span><span class="s1">&#39;usa&#39;</span><span class="p">)</span>

<span class="n">geocode_cities</span><span class="p">([</span><span class="s1">&#39;worcester&#39;</span><span class="p">,</span> <span class="s1">&#39;worcester&#39;</span><span class="p">])</span>\
    <span class="o">.</span><span class="n">countries</span><span class="p">([</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="s1">&#39;United Kingdom&#39;</span><span class="p">])</span>\
    <span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;worcester&#39;</span><span class="p">,</span> <span class="n">country</span><span class="o">=</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span> <span class="n">scope</span><span class="o">=</span><span class="n">worcester_county</span><span class="p">)</span>\
    <span class="o">.</span><span class="n">get_geocodes</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>city</th>
      <th>found name</th>
      <th>country</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>3688419</td>
      <td>worcester</td>
      <td>Worcester</td>
      <td>USA</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3750683</td>
      <td>worcester</td>
      <td>Worcester</td>
      <td>United Kingdom</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
</div>
<div class="section" id="working-with-plots">
<span id="geocoding-working-with-plot"></span><h3>Working with plots<a class="headerlink" href="#working-with-plots" title="Permalink to this headline">¶</a></h3>
<div class="section" id="plotting-a-geodataframe">
<span id="geocoding-plot-gdf"></span><h4>Plotting a <code class="docutils literal notranslate"><span class="pre">GeoDataFrame</span></code><a class="headerlink" href="#plotting-a-geodataframe" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">get_xxx()</span></code> functions return GeoDataFrame which can be used as <code class="docutils literal notranslate"><span class="pre">data</span></code> or <code class="docutils literal notranslate"><span class="pre">map</span></code> parameter (see <a class="reference external" href="https://nbviewer.jupyter.org/github/JetBrains/lets-plot/blob/master/docs/examples/jupyter-notebooks/geopandas_naturalearth.ipynb">this</a> or <a class="reference external" href="https://nbviewer.jupyter.org/github/JetBrains/lets-plot/blob/master/docs/examples/jupyter-notebooks/geopandas_kotlin_isl.ipynb">this</a>).</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">lets_plot</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">LetsPlot</span><span class="o">.</span><span class="n">setup_html</span><span class="p">()</span>

<span class="n">ggplot</span><span class="p">()</span> <span class="o">+</span> <span class="n">geom_point</span><span class="p">(</span><span class="nb">map</span><span class="o">=</span><span class="n">geocode_states</span><span class="p">(</span><span class="s1">&#39;us-48&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get_centroids</span><span class="p">())</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<div id="fEaKWt"></div>
<script type="text/javascript" data-lets-plot-script="library">
    if(!window.letsPlotCallQueue) {
        window.letsPlotCallQueue = [];
    }; 
    window.letsPlotCall = function(f) {
        window.letsPlotCallQueue.push(f);
    };
    (function() {
        var script = document.createElement("script");
        script.type = "text/javascript";
        script.src = "https://cdnjs.cloudflare.com/ajax/libs/lets-plot/2.0.2/lets-plot.min.js";
        script.onload = function() {
            window.letsPlotCall = function(f) {f();};
            window.letsPlotCallQueue.forEach(function(f) {f();});
            window.letsPlotCallQueue = [];

        };
        script.onerror = function(event) {
            window.letsPlotCall = function(f) {};    // noop
            window.letsPlotCallQueue = [];
            var div = document.createElement("div");
            div.style.color = 'darkred';
            div.textContent = 'Error loading Lets-Plot JS';
            document.getElementById("fEaKWt").appendChild(div);
        };
        var e = document.getElementById("fEaKWt");
        e.appendChild(script);
    })()
</script>
</div><div class="output text_html">   <div id="iRlBKb"></div>
   <script type="text/javascript" data-lets-plot-script="plot">
       (function() {
           var plotSpec={
'mapping':{
},
'data_meta':{
},
'kind':"plot",
'scales':[],
'layers':[{
'geom':"point",
'mapping':{
},
'data_meta':{
},
'map_data_meta':{
'geodataframe':{
'geometry':"geometry"
}
},
'map':{
'state':["Vermont","Massachusetts","New York","Maine","New Hampshire","Texas","Illinois","Missouri","Kansas","Oklahoma","Arkansas","Nebraska","Iowa","South Dakota","North Dakota","Kentucky","Indiana","Tennessee","Mississippi","Alabama","Georgia","Colorado","Wyoming","Utah","New Mexico","Arizona","Florida","Ohio","West Virginia","District of Columbia","Pennsylvania","Delaware","Maryland","Montana","Idaho","Wisconsin","Minnesota","Nevada","California","Oregon","Washington","Michigan","Connecticut","South Carolina","Virginia","North Carolina","Louisiana","New Jersey","Rhode Island"],
'found name':["Vermont","Massachusetts","New York","Maine","New Hampshire","Texas","Illinois","Missouri","Kansas","Oklahoma","Arkansas","Nebraska","Iowa","South Dakota","North Dakota","Kentucky","Indiana","Tennessee","Mississippi","Alabama","Georgia","Colorado","Wyoming","Utah","New Mexico","Arizona","Florida","Ohio","West Virginia","District of Columbia","Pennsylvania","Delaware","Maryland","Montana","Idaho","Wisconsin","Minnesota","Nevada","California","Oregon","Washington","Michigan","Connecticut","South Carolina","Virginia","North Carolina","Louisiana","New Jersey","Rhode Island"],
'geometry':["{\"type\": \"Point\", \"coordinates\": [-72.772353529363, 43.8718488067389]}","{\"type\": \"Point\", \"coordinates\": [-72.0964509143505, 42.1913791447878]}","{\"type\": \"Point\", \"coordinates\": [-76.0999038136662, 42.8621687740088]}","{\"type\": \"Point\", \"coordinates\": [-69.1608471741827, 45.2623642981052]}","{\"type\": \"Point\", \"coordinates\": [-71.5517876605831, 44.0015134960413]}","{\"type\": \"Point\", \"coordinates\": [-99.6829525269137, 31.1685702949762]}","{\"type\": \"Point\", \"coordinates\": [-89.451321863232, 39.7387826442719]}","{\"type\": \"Point\", \"coordinates\": [-92.4924265655452, 38.3039845526218]}","{\"type\": \"Point\", \"coordinates\": [-98.328692575607, 38.5217376798391]}","{\"type\": \"Point\", \"coordinates\": [-97.21699429948, 35.3174138814211]}","{\"type\": \"Point\", \"coordinates\": [-92.4984827479225, 34.7509514540434]}","{\"type\": \"Point\", \"coordinates\": [-100.027538024238, 41.501209884882]}","{\"type\": \"Point\", \"coordinates\": [-93.1514127397129, 41.9395130127668]}","{\"type\": \"Point\", \"coordinates\": [-100.253885285003, 44.2193739116192]}","{\"type\": \"Point\", \"coordinates\": [-100.452325244499, 47.4677764624357]}","{\"type\": \"Point\", \"coordinates\": [-84.729118063289, 37.823773920536]}","{\"type\": \"Point\", \"coordinates\": [-86.1734508970078, 39.7625309228897]}","{\"type\": \"Point\", \"coordinates\": [-86.3173561038854, 35.8305955678225]}","{\"type\": \"Point\", \"coordinates\": [-89.7084286073575, 32.5858394801617]}","{\"type\": \"Point\", \"coordinates\": [-86.7421099329499, 32.6446247845888]}","{\"type\": \"Point\", \"coordinates\": [-83.2514879869572, 32.6792977005243]}","{\"type\": \"Point\", \"coordinates\": [-105.549469314711, 38.9999721944332]}","{\"type\": \"Point\", \"coordinates\": [-107.548611778195, 43.0007712543011]}","{\"type\": \"Point\", \"coordinates\": [-111.54915785543, 39.4988744705915]}","{\"type\": \"Point\", \"coordinates\": [-106.045169724866, 34.2040651291609]}","{\"type\": \"Point\", \"coordinates\": [-111.665190827228, 34.1682100296021]}","{\"type\": \"Point\", \"coordinates\": [-81.6636367059175, 28.0571937561035]}","{\"type\": \"Point\", \"coordinates\": [-82.7062932155643, 40.3632525354624]}","{\"type\": \"Point\", \"coordinates\": [-80.2961093874269, 38.9198365062475]}","{\"type\": \"Point\", \"coordinates\": [-76.9879975677786, 38.8937935978174]}","{\"type\": \"Point\", \"coordinates\": [-77.7395653681049, 41.1167051643133]}","{\"type\": \"Point\", \"coordinates\": [-75.5803336262906, 39.1468942165375]}","{\"type\": \"Point\", \"coordinates\": [-76.0491943321089, 38.8246569782495]}","{\"type\": \"Point\", \"coordinates\": [-109.343314037162, 46.6796220839024]}","{\"type\": \"Point\", \"coordinates\": [-115.464817458905, 45.4943814128637]}","{\"type\": \"Point\", \"coordinates\": [-89.7229295951697, 44.8979325592518]}","{\"type\": \"Point\", \"coordinates\": [-94.5024903450148, 46.4419361203909]}","{\"type\": \"Point\", \"coordinates\": [-116.666956541192, 38.5030842572451]}","{\"type\": \"Point\", \"coordinates\": [-119.994112927034, 37.277335524559]}","{\"type\": \"Point\", \"coordinates\": [-120.525597872899, 44.1131933033466]}","{\"type\": \"Point\", \"coordinates\": [-119.708685107566, 47.2730628401041]}","{\"type\": \"Point\", \"coordinates\": [-84.5068071817736, 45.0034050643444]}","{\"type\": \"Point\", \"coordinates\": [-72.8051602172588, 41.5181306004524]}","{\"type\": \"Point\", \"coordinates\": [-80.570954325977, 33.6225119233131]}","{\"type\": \"Point\", \"coordinates\": [-78.2939080535943, 38.0035275220871]}","{\"type\": \"Point\", \"coordinates\": [-79.4801673963663, 35.214960873127]}","{\"type\": \"Point\", \"coordinates\": [-92.5706733638148, 31.0122518241405]}","{\"type\": \"Point\", \"coordinates\": [-74.3697852301935, 40.1556817442179]}","{\"type\": \"Point\", \"coordinates\": [-71.616087798033, 41.660518348217]}"]
},
'data':{
}
}]
};
           var plotContainer = document.getElementById("iRlBKb");
           window.letsPlotCall(function() {{
               LetsPlot.buildPlotFromProcessedSpecs(plotSpec, -1, -1, plotContainer);
           }});
       })();    
   </script></div></div>
</div>
</div>
<div class="section" id="plotting-a-geocoder">
<span id="geocoding-plot-geocoder"></span><h4>Plotting a <code class="docutils literal notranslate"><span class="pre">Geocoder</span></code><a class="headerlink" href="#plotting-a-geocoder" title="Permalink to this headline">¶</a></h4>
<p>Drawing geometries with <code class="docutils literal notranslate"><span class="pre">Geocoder</span></code> is a bit easier than using <code class="docutils literal notranslate"><span class="pre">GeoDataFrame</span></code>.
Just pass a <code class="docutils literal notranslate"><span class="pre">Geocoder</span></code> to the <code class="docutils literal notranslate"><span class="pre">map</span></code> parameter, and the layer will fetch geometry it supports:</p>
<div class="jupyter_cell jupyter_container docutils container">
<div class="cell_input code_cell docutils container">
<div class="highlight-default notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">ggplot</span><span class="p">()</span> <span class="o">+</span> <span class="n">geom_point</span><span class="p">(</span><span class="nb">map</span><span class="o">=</span><span class="n">geocode_states</span><span class="p">(</span><span class="s1">&#39;us-48&#39;</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">   <div id="PTvcEC"></div>
   <script type="text/javascript" data-lets-plot-script="plot">
       (function() {
           var plotSpec={
'mapping':{
},
'data_meta':{
},
'kind':"plot",
'scales':[],
'layers':[{
'geom':"point",
'mapping':{
},
'data_meta':{
},
'map_data_meta':{
'geodataframe':{
'geometry':"geometry"
}
},
'map':{
'state':["Vermont","Massachusetts","New York","Maine","New Hampshire","Texas","Illinois","Missouri","Kansas","Oklahoma","Arkansas","Nebraska","Iowa","South Dakota","North Dakota","Kentucky","Indiana","Tennessee","Mississippi","Alabama","Georgia","Colorado","Wyoming","Utah","New Mexico","Arizona","Florida","Ohio","West Virginia","District of Columbia","Pennsylvania","Delaware","Maryland","Montana","Idaho","Wisconsin","Minnesota","Nevada","California","Oregon","Washington","Michigan","Connecticut","South Carolina","Virginia","North Carolina","Louisiana","New Jersey","Rhode Island"],
'found name':["Vermont","Massachusetts","New York","Maine","New Hampshire","Texas","Illinois","Missouri","Kansas","Oklahoma","Arkansas","Nebraska","Iowa","South Dakota","North Dakota","Kentucky","Indiana","Tennessee","Mississippi","Alabama","Georgia","Colorado","Wyoming","Utah","New Mexico","Arizona","Florida","Ohio","West Virginia","District of Columbia","Pennsylvania","Delaware","Maryland","Montana","Idaho","Wisconsin","Minnesota","Nevada","California","Oregon","Washington","Michigan","Connecticut","South Carolina","Virginia","North Carolina","Louisiana","New Jersey","Rhode Island"],
'geometry':["{\"type\": \"Point\", \"coordinates\": [-72.772353529363, 43.8718488067389]}","{\"type\": \"Point\", \"coordinates\": [-72.0964509143505, 42.1913791447878]}","{\"type\": \"Point\", \"coordinates\": [-76.0999038136662, 42.8621687740088]}","{\"type\": \"Point\", \"coordinates\": [-69.1608471741827, 45.2623642981052]}","{\"type\": \"Point\", \"coordinates\": [-71.5517876605831, 44.0015134960413]}","{\"type\": \"Point\", \"coordinates\": [-99.6829525269137, 31.1685702949762]}","{\"type\": \"Point\", \"coordinates\": [-89.451321863232, 39.7387826442719]}","{\"type\": \"Point\", \"coordinates\": [-92.4924265655452, 38.3039845526218]}","{\"type\": \"Point\", \"coordinates\": [-98.328692575607, 38.5217376798391]}","{\"type\": \"Point\", \"coordinates\": [-97.21699429948, 35.3174138814211]}","{\"type\": \"Point\", \"coordinates\": [-92.4984827479225, 34.7509514540434]}","{\"type\": \"Point\", \"coordinates\": [-100.027538024238, 41.501209884882]}","{\"type\": \"Point\", \"coordinates\": [-93.1514127397129, 41.9395130127668]}","{\"type\": \"Point\", \"coordinates\": [-100.253885285003, 44.2193739116192]}","{\"type\": \"Point\", \"coordinates\": [-100.452325244499, 47.4677764624357]}","{\"type\": \"Point\", \"coordinates\": [-84.729118063289, 37.823773920536]}","{\"type\": \"Point\", \"coordinates\": [-86.1734508970078, 39.7625309228897]}","{\"type\": \"Point\", \"coordinates\": [-86.3173561038854, 35.8305955678225]}","{\"type\": \"Point\", \"coordinates\": [-89.7084286073575, 32.5858394801617]}","{\"type\": \"Point\", \"coordinates\": [-86.7421099329499, 32.6446247845888]}","{\"type\": \"Point\", \"coordinates\": [-83.2514879869572, 32.6792977005243]}","{\"type\": \"Point\", \"coordinates\": [-105.549469314711, 38.9999721944332]}","{\"type\": \"Point\", \"coordinates\": [-107.548611778195, 43.0007712543011]}","{\"type\": \"Point\", \"coordinates\": [-111.54915785543, 39.4988744705915]}","{\"type\": \"Point\", \"coordinates\": [-106.045169724866, 34.2040651291609]}","{\"type\": \"Point\", \"coordinates\": [-111.665190827228, 34.1682100296021]}","{\"type\": \"Point\", \"coordinates\": [-81.6636367059175, 28.0571937561035]}","{\"type\": \"Point\", \"coordinates\": [-82.7062932155643, 40.3632525354624]}","{\"type\": \"Point\", \"coordinates\": [-80.2961093874269, 38.9198365062475]}","{\"type\": \"Point\", \"coordinates\": [-76.9879975677786, 38.8937935978174]}","{\"type\": \"Point\", \"coordinates\": [-77.7395653681049, 41.1167051643133]}","{\"type\": \"Point\", \"coordinates\": [-75.5803336262906, 39.1468942165375]}","{\"type\": \"Point\", \"coordinates\": [-76.0491943321089, 38.8246569782495]}","{\"type\": \"Point\", \"coordinates\": [-109.343314037162, 46.6796220839024]}","{\"type\": \"Point\", \"coordinates\": [-115.464817458905, 45.4943814128637]}","{\"type\": \"Point\", \"coordinates\": [-89.7229295951697, 44.8979325592518]}","{\"type\": \"Point\", \"coordinates\": [-94.5024903450148, 46.4419361203909]}","{\"type\": \"Point\", \"coordinates\": [-116.666956541192, 38.5030842572451]}","{\"type\": \"Point\", \"coordinates\": [-119.994112927034, 37.277335524559]}","{\"type\": \"Point\", \"coordinates\": [-120.525597872899, 44.1131933033466]}","{\"type\": \"Point\", \"coordinates\": [-119.708685107566, 47.2730628401041]}","{\"type\": \"Point\", \"coordinates\": [-84.5068071817736, 45.0034050643444]}","{\"type\": \"Point\", \"coordinates\": [-72.8051602172588, 41.5181306004524]}","{\"type\": \"Point\", \"coordinates\": [-80.570954325977, 33.6225119233131]}","{\"type\": \"Point\", \"coordinates\": [-78.2939080535943, 38.0035275220871]}","{\"type\": \"Point\", \"coordinates\": [-79.4801673963663, 35.214960873127]}","{\"type\": \"Point\", \"coordinates\": [-92.5706733638148, 31.0122518241405]}","{\"type\": \"Point\", \"coordinates\": [-74.3697852301935, 40.1556817442179]}","{\"type\": \"Point\", \"coordinates\": [-71.616087798033, 41.660518348217]}"]
},
'data':{
}
}]
};
           var plotContainer = document.getElementById("PTvcEC");
           window.letsPlotCall(function() {{
               LetsPlot.buildPlotFromProcessedSpecs(plotSpec, -1, -1, plotContainer);
           }});
       })();    
   </script></div></div>
</div>
<div class="line-block">
<div class="line">The list of geoms and corresponding fetching functions they support:</div>
</div>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>geom_point(), geom_text()</p></td>
<td><p>get_centroids()</p></td>
</tr>
<tr class="row-odd"><td><p>geom_map(), geom_polygon()</p></td>
<td><p>get_boundaries()</p></td>
</tr>
<tr class="row-even"><td><p>geom_rect()</p></td>
<td><p>get_limits()</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="map-and-map-join">
<span id="geocoding-join"></span><h4><code class="docutils literal notranslate"><span class="pre">map</span></code> and <code class="docutils literal notranslate"><span class="pre">map_join</span></code><a class="headerlink" href="#map-and-map-join" title="Permalink to this headline">¶</a></h4>
<p>Parameter <code class="docutils literal notranslate"><span class="pre">map_join</span></code> is used to join map coordinates with data. Keys used to join:</p>
<ul class="simple">
<li><p>first value in a pair is data_key (column/columns in <code class="docutils literal notranslate"><span class="pre">data</span></code>),</p></li>
<li><p>second value in a pair is a map_key (column/columns in <code class="docutils literal notranslate"><span class="pre">map</span></code>).</p></li>
</ul>
<div class="section" id="join-with-geodataframe">
<span id="geocoding-join-gdf"></span><h5>Join with <code class="docutils literal notranslate"><span class="pre">GeoDataFrame</span></code><a class="headerlink" href="#join-with-geodataframe" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">map_join='state'</span></code>:
same as <code class="docutils literal notranslate"><span class="pre">[['state'],</span> <span class="pre">['state']]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map_join=[['city',</span> <span class="pre">'state']]</span></code>:
same as <code class="docutils literal notranslate"><span class="pre">[['city',</span> <span class="pre">'state'],</span> <span class="pre">['city',</span> <span class="pre">'state']]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map_join=[['City_Name',</span> <span class="pre">'State_Name'],</span> <span class="pre">['city',</span> <span class="pre">'state']]</span></code>:
Explicitly set keys for both data and map.</p></li>
</ul>
</div>
<div class="section" id="join-with-geocoder">
<span id="geocoding-join-geocoder"></span><h5>Join with <code class="docutils literal notranslate"><span class="pre">Geocoder</span></code><a class="headerlink" href="#join-with-geocoder" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">Geocoder</span></code> contains metadata so in most cases only data have to be provided - Lets-Plot will generate map keys automatically with columns that were used for geocoding.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">map_join='State_Name'</span></code>:
same as <code class="docutils literal notranslate"><span class="pre">[['State_Name'],</span> <span class="pre">['state']]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map_join=['City_Name',</span> <span class="pre">'State_Name']</span></code>:
same as <code class="docutils literal notranslate"><span class="pre">[['City_Name',</span> <span class="pre">'State_Name'],</span> <span class="pre">['city',</span> <span class="pre">'state']]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map_join=[['City_Name',</span> <span class="pre">'State_Name'],</span> <span class="pre">['city',</span> <span class="pre">'state']]</span></code>:
Explicitly set keys for both data and map.</p></li>
</ul>
<p><strong>NB: Generated keys follow this order - ``city``, ``county``, ``state``, ``country``.
Parents that were not provided will be omitted.
Data columns should follow the same order or result of join operation will be incorrect.</strong></p>
</div>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
    </p>
    <p>
      Copyright © 2019-2021 JetBrains s.r.o.<br>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.4.<br>
    </p>
  </div>
</footer>

  </body>
</html>